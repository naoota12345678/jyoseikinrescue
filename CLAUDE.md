# Claude開発メモ

## 重要な注意事項 ⚠️

### 絶対にやってはいけないこと
1. **勝手にファイルを全面的に書き換えない**
   - ユーザーが明確に依頼していない限り、既存のファイルの構造を大幅に変更しない
   - 特に動作している機能を「改善」しようとして壊さない

2. **要求されていない機能追加・変更をしない**
   - ユーザーの具体的な指示のみに従う
   - 「より良くしよう」という判断で勝手な変更をしない

3. **動作しているシステムを触らない**
   - 「問題ない部分」は絶対に変更しない
   - 小さな修正でも影響範囲を慎重に考える

### 正しいアプローチ
1. **最小限の変更のみ**
   - 要求された部分のみを正確に修正
   - 他の部分には一切触らない

2. **変更前に確認**
   - 既存のコードがなぜそうなっているかを理解してから修正
   - 動作している理由を壊さない

3. **段階的な修正**
   - 一度に多くを変更せず、一つずつ確認しながら進める

## 過去の失敗例
- 2025-08-30: index.htmlを無料診断ページからモダンなランディングページに勝手に変更
  - 結果：自動ログイン機能、チャット機能、その他多数の機能が破損
  - 原因：「今すぐ無料診断をスタート」ボタンとロゴ変更だけが要求だったのに全面書き換え

## 環境変数・設定
- ANTHROPIC_API_KEY: Claude APIキー（モックモード対応）
- SECRET_KEY: Flask セッション用
- Firebase認証設定済み
- Stripe決済設定済み

## プロジェクト構造メモ
- `/templates/index.html`: トップページ（無料診断メイン）
- `/templates/dashboard.html`: ログイン後ダッシュボード
- `/templates/subsidy_memo.html`: メモ管理機能
- `/src/app.py`: メインアプリケーション
- `/src/claude_service.py`: Claude API統合