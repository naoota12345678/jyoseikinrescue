<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ©æˆé‡‘è¨ºæ–­ã‚·ã‚¹ãƒ†ãƒ  - è©³ç´°ç‰ˆ</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f4eddc;
            min-height: 100vh;
            margin: 0;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .header {
            background: transparent;
            color: #333;
            padding: 2rem 0;
            text-align: center;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .back-button {
            background: #E35614;
            color: white;
            border: 2px solid #E35614;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            background: #D14510;
            border-color: #D14510;
        }
        
        .main-title {
            font-size: 4rem;
            font-weight: 900;
            margin: 2rem 0 1rem 0;
            text-shadow: 2px 4px 8px rgba(0,0,0,0.3);
            letter-spacing: -1px;
        }
        
        .main-subtitle {
            font-size: 1.5rem;
            font-weight: 300;
            opacity: 0.95;
            margin-bottom: 3rem;
        }
        
        .hero-section {
            text-align: center;
            padding: 4rem 0;
            color: #333;
        }
        
        .cta-button {
            display: inline-block;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            color: white;
            padding: 1.2rem 3rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.2rem;
            border: 2px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }
        
        .cta-button:hover {
            background: rgba(255,255,255,0.25);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo-icon {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: 600;
            position: relative;
        }
        
        .logo-image {
            height: 12rem;
        }
        
        .logo-text {
            font-size: 1.3rem;
            font-weight: bold;
            letter-spacing: 0.05em;
        }
        
        .logo-tagline {
            font-size: 0.7rem;
            font-weight: normal;
            opacity: 0.9;
            margin-left: 1rem;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .content-wrapper {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 3rem;
            margin: 2rem auto 4rem auto;
            max-width: 900px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        
        .page-title {
            text-align: center;
            color: #333;
            margin-bottom: 2rem;
            font-size: 1.25rem;
            font-weight: 700;
        }
        
        .page-description {
            text-align: center;
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 3rem;
            line-height: 1.8;
        }
        
        .question {
            margin-bottom: 2rem;
        }
        
        .question h3 {
            margin-bottom: 1rem;
            color: #495057;
        }
        
        .options {
            display: grid;
            gap: 0.5rem;
        }
        
        .option {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .option:hover {
            border-color: #667eea;
            background-color: #f8f9ff;
        }
        
        .option input {
            margin-right: 0.75rem;
        }
        
        .option.selected {
            border-color: #667eea;
            background-color: #f8f9ff;
        }
        
        button {
            background: #E35614;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-top: 2rem;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .results {
            display: none;
        }
        
        .result-item {
            background: #f8f9ff;
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-radius: 8px;
        }
        
        .result-item h4 {
            color: #667eea;
            margin-bottom: 0.5rem;
        }
        
        .amount {
            color: #e74c3c;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <img src="/static/logo.png" class="logo-image" alt="åŠ©æˆé‡‘ãƒ¬ã‚¹ã‚­ãƒ¥ãƒ¼">
            </div>
            <a href="/" class="back-button">â† æˆ»ã‚‹</a>
        </div>
    </div>
    
    <div class="hero-section">
        <div class="container">
            <p class="main-subtitle">
                9ã¤ã®è³ªå•ã«ç­”ãˆã‚‹ã ã‘ã§ã€ã‚ãªãŸã®ä¼šç¤¾ã«æœ€é©ãªåŠ©æˆé‡‘ã‚’ç¬æ™‚ã«è¨ºæ–­
            </p>
        </div>
    </div>
    
    <div class="container">
        <div class="content-wrapper">
            <h2 class="page-title">åŠ©æˆé‡‘é©ç”¨è¨ºæ–­</h2>
            <p class="page-description">
                ä»¥ä¸‹ã®è³ªå•ã«ãŠç­”ãˆãã ã•ã„ã€‚è¨ºæ–­ã¯å®Œå…¨ç„¡æ–™ã§ã€ç´„1åˆ†ã§å®Œäº†ã—ã¾ã™ã€‚<br>
                è¨ºæ–­çµæœã«ã¯å…·ä½“çš„ãªæ”¯çµ¦é¡ã‚„ç”³è«‹è¦ä»¶ã‚‚è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚<br>
                ã™ã¹ã¦ã®é …ç›®ã«å›ç­”ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚åˆ†ã‹ã‚‹ç¯„å›²ã§ãŠç­”ãˆãã ã•ã„ã€‚
            </p>
            <form id="diagnosisForm">
                <!-- åŸºæœ¬æƒ…å ± -->
                <div class="question">
                    <h3>1. ä¼šç¤¾ã®åŸºæœ¬æƒ…å ±</h3>
                    <label>æ¥­ç¨®:</label>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'industry', 'construction')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="radio" name="industry" value="construction"> å»ºè¨­æ¥­
                            </label>
                        </div>
                        <div class="option" onclick="selectOption(this, 'industry', 'manufacturing')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="radio" name="industry" value="manufacturing"> è£½é€ æ¥­
                            </label>
                        </div>
                        <div class="option" onclick="selectOption(this, 'industry', 'service')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="radio" name="industry" value="service"> ã‚µãƒ¼ãƒ“ã‚¹æ¥­
                            </label>
                        </div>
                        <div class="option" onclick="selectOption(this, 'industry', 'it')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="radio" name="industry" value="it"> ITãƒ»é€šä¿¡æ¥­
                            </label>
                        </div>
                        <div class="option" onclick="selectOption(this, 'industry', 'other')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="radio" name="industry" value="other"> ãã®ä»–
                            </label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>2. å¾“æ¥­å“¡æ•°</h3>
                    <label>ç·å¾“æ¥­å“¡æ•°:</label>
                    <input type="number" name="totalEmployees" placeholder="ä¾‹: 25">
                </div>

                <div class="question">
                    <h3>3. é›‡ç”¨å½¢æ…‹åˆ¥ã®äººæ•°</h3>
                    <label>é›‡ç”¨ä¿é™ºè¢«ä¿é™ºè€…æ•°:</label>
                    <input type="number" name="insuredEmployees" placeholder="ä¾‹: 20"><br><br>
                    <label>æœ‰æœŸå¥‘ç´„åŠ´åƒè€…æ•°:</label>
                    <input type="number" name="temporaryEmployees" placeholder="ä¾‹: 5"><br><br>
                    <label>çŸ­æ™‚é–“åŠ´åƒè€…æ•°ï¼ˆé€±20æ™‚é–“æœªæº€ï¼‰:</label>
                    <input type="number" name="partTimeEmployees" placeholder="ä¾‹: 3">
                </div>

                <div class="question">
                    <h3>4. åŠ´åƒè€…ã®å¹´é½¢æ§‹æˆ</h3>
                    <div class="options">
                        <div class="option" onclick="selectMultiple(this, 'ageGroups')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="ageGroups" value="young"> 35æ­³æœªæº€ã®è‹¥å¹´è€…ãŒã„ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'ageGroups')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="ageGroups" value="middle"> 50æ­³ä»¥ä¸Šã®ä¸­é«˜å¹´è€…ãŒã„ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'ageGroups')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="ageGroups" value="senior60"> 60ï½64æ­³ã®é«˜å¹´é½¢è€…ãŒã„ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'ageGroups')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="ageGroups" value="senior65"> 65æ­³ä»¥ä¸Šã®é«˜é½¢è€…ãŒã„ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'ageGroups')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="ageGroups" value="seniorHire"> 65æ­³ä»¥ä¸Šã®ç¶™ç¶šé›‡ç”¨åˆ¶åº¦ãŒã‚ã‚‹ãƒ»æ¤œè¨ä¸­
                            </label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>5. ç‰¹åˆ¥ãªé…æ…®ãŒå¿…è¦ãªåŠ´åƒè€…</h3>
                    <div class="options">
                        <div class="option" onclick="selectMultiple(this, 'specialNeeds')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="specialNeeds" value="disability"> éšœå®³è€…é›‡ç”¨ãŒã‚ã‚‹ãƒ»äºˆå®šãŒã‚ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'specialNeeds')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="specialNeeds" value="female"> å¥³æ€§åŠ´åƒè€…ã®æ´»èºæ¨é€²
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'specialNeeds')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="specialNeeds" value="foreign"> å¤–å›½äººåŠ´åƒè€…ãŒã„ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'specialNeeds')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="specialNeeds" value="singleParent"> æ¯å­ãƒ»çˆ¶å­å®¶åº­ã®åŠ´åƒè€…ãŒã„ã‚‹
                            </label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>6. ç¾åœ¨ã®çµŒå–¶çŠ¶æ³</h3>
                    <div class="options">
                        <div class="option" onclick="selectOption(this, 'businessSituation', 'declining')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="radio" name="businessSituation" value="declining"> å£²ä¸Šæ¸›å°‘ãƒ»äº‹æ¥­ç¸®å°ã—ã¦ã„ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectOption(this, 'businessSituation', 'stable')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="radio" name="businessSituation" value="stable"> å®‰å®šã—ã¦ã„ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectOption(this, 'businessSituation', 'growing')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="radio" name="businessSituation" value="growing"> æˆé•·ãƒ»æ‹¡å¤§ã—ã¦ã„ã‚‹
                            </label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>7. è³ƒé‡‘ãƒ»å‡¦é‡ã®çŠ¶æ³</h3>
                    <label>äº‹æ¥­å ´å†…æœ€ä½è³ƒé‡‘ï¼ˆæ™‚çµ¦ï¼‰:</label>
                    <input type="number" name="minWage" placeholder="ä¾‹: 900"><br><br>
                    
                    <div class="options">
                        <div class="option" onclick="selectMultiple(this, 'wageImprovement')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="wageImprovement" value="raise"> è³ƒé‡‘å¼•ä¸Šã’ã‚’æ¤œè¨ã—ã¦ã„ã‚‹
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'wageImprovement')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="wageImprovement" value="regularization"> éæ­£è¦ã‚’æ­£ç¤¾å“¡åŒ–ã—ãŸã„
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'wageImprovement')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="wageImprovement" value="bonus"> è³ä¸ãƒ»é€€è·é‡‘åˆ¶åº¦ã‚’å°å…¥ã—ãŸã„
                            </label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>8. æŠ•è³‡ãƒ»æ”¹å–„ã®äºˆå®š</h3>
                    <div class="options">
                        <div class="option" onclick="selectMultiple(this, 'investments')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="investments" value="equipment"> è¨­å‚™æŠ•è³‡ãƒ»æ©Ÿå™¨å°å…¥
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'investments')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="investments" value="training"> è·æ¥­è¨“ç·´ãƒ»ç ”ä¿®å®Ÿæ–½
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'investments')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="investments" value="it"> ITåŒ–ãƒ»DXæ¨é€²
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'investments')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="investments" value="workStyle"> åƒãæ–¹æ”¹é©ï¼ˆãƒ†ãƒ¬ãƒ¯ãƒ¼ã‚¯ç­‰ï¼‰
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'investments')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="investments" value="safety"> å®‰å…¨è¡›ç”Ÿå¯¾ç­–
                            </label>
                        </div>
                    </div>
                </div>

                <div class="question">
                    <h3>9. ä¸¡ç«‹æ”¯æ´ãƒ»è·å ´ç’°å¢ƒ</h3>
                    <div class="options">
                        <div class="option" onclick="selectMultiple(this, 'workLifeBalance')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="workLifeBalance" value="childcare"> è‚²å…æ”¯æ´åˆ¶åº¦ã‚’å……å®Ÿã•ã›ãŸã„
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'workLifeBalance')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="workLifeBalance" value="eldercare"> ä»‹è­·æ”¯æ´åˆ¶åº¦ã‚’å……å®Ÿã•ã›ãŸã„
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'workLifeBalance')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="workLifeBalance" value="health"> å¥åº·çµŒå–¶ã‚’æ¨é€²ã—ãŸã„
                            </label>
                        </div>
                        <div class="option" onclick="selectMultiple(this, 'workLifeBalance')">
                            <label style="display: block; width: 100%; cursor: pointer; margin: 0;">
                                <input type="checkbox" name="workLifeBalance" value="smoking"> å—å‹•å–«ç…™é˜²æ­¢å¯¾ç­–ãŒå¿…è¦
                            </label>
                        </div>
                    </div>
                </div>

                <button type="button" onclick="diagnose()">ğŸ“‹ åŠ©æˆé‡‘è¨ºæ–­ã‚’å®Ÿè¡Œ</button>
            </form>
        </div>

        <div class="content-wrapper results" id="results">
            <h2 style="text-align: center; color: #333; font-size: 2.2rem; font-weight: 700; margin-bottom: 2rem;">ğŸ¯ è¨ºæ–­çµæœ</h2>
            <div id="resultsList"></div>
        </div>
    </div>

    <script>
        function selectOption(element, name, value) {
            // åŒã˜nameå±æ€§ã®ä»–ã®é¸æŠè‚¢ã‚’éé¸æŠçŠ¶æ…‹ã«
            document.querySelectorAll(`input[name="${name}"]`).forEach(input => {
                input.closest('.option').classList.remove('selected');
                input.checked = false;
            });
            
            // é¸æŠã•ã‚ŒãŸé …ç›®ã‚’é¸æŠçŠ¶æ…‹ã«
            element.classList.add('selected');
            element.querySelector('input').checked = true;
        }

        function selectMultiple(element, name) {
            const input = element.querySelector('input');
            input.checked = !input.checked;
            element.classList.toggle('selected');
        }

        async function diagnose() {
            // è¨ºæ–­å®Ÿè¡Œå‰ã«ä¼šç¤¾æƒ…å ±ã‚’ä¿å­˜
            savedCompanyInfo = getCurrentCompanyInfo();
            console.log('è¨ºæ–­é–‹å§‹æ™‚ã®ä¼šç¤¾æƒ…å ±ã‚’ä¿å­˜:', savedCompanyInfo);
            
            const formData = new FormData(document.getElementById('diagnosisForm'));
            const data = {};
            
            // åŸºæœ¬ãƒ‡ãƒ¼ã‚¿ã®åé›†
            for (let [key, value] of formData.entries()) {
                if (data[key]) {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }

            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            displayLoading();

            try {
                // Claude AIã«è¨ºæ–­ã‚’ä¾é ¼
                const response = await fetch('/api/joseikin-diagnosis', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        diagnosis_data: data
                    })
                });

                const result = await response.json();
                
                if (result.status === 'success') {
                    displayResults(result.applicable_grants);
                } else {
                    displayError('è¨ºæ–­ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ' + result.error);
                }
                
            } catch (error) {
                console.error('è¨ºæ–­ã‚¨ãƒ©ãƒ¼:', error);
                displayError('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãæ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
            }
        }

        function displayLoading() {
            const resultsDiv = document.getElementById('results');
            const resultsList = document.getElementById('resultsList');
            
            resultsList.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div style="animation: spin 1s linear infinite; width: 50px; height: 50px; border: 4px solid #f3f3f3; border-top: 4px solid #667eea; border-radius: 50%; margin: 0 auto 1rem;"></div>
                    <p>AIå°‚é–€å®¶ãŒå…¨29ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®åŠ©æˆé‡‘ã‚’è¨ºæ–­ä¸­...</p>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">ä»¤å’Œ7å¹´åº¦ã®æœ€æ–°æƒ…å ±ã§åˆ¤å®šã—ã¦ã„ã¾ã™</p>
                </div>
                <style>
                    @keyframes spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                </style>
            `;
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        function displayError(message) {
            const resultsList = document.getElementById('resultsList');
            resultsList.innerHTML = `<div style="color: #e74c3c; text-align: center; padding: 2rem;">${message}</div>`;
        }

        function displayResults(results) {
            const resultsDiv = document.getElementById('results');
            const resultsList = document.getElementById('resultsList');
            
            // è¨ºæ–­çµæœã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã«ä¿å­˜
            currentDiagnosisResults = results;
            
            if (results.length === 0) {
                resultsList.innerHTML = '<p>ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚ç¾åœ¨ã®æ¡ä»¶ã§ã¯è©²å½“ã™ã‚‹åŠ©æˆé‡‘ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚æ¡ä»¶ã‚’è¦‹ç›´ã™ã‹ã€å€‹åˆ¥ç›¸è«‡ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚</p>';
            } else {
                resultsList.innerHTML = results.map(result => `
                    <div class="result-item">
                        <h4>${result.name}</h4>
                        <div style="white-space: pre-line;">${result.description}</div>
                    </div>
                `).join('') + `
                    <div style="text-align: center; margin-top: 2rem; padding: 2rem; background: #f8f9ff; border-radius: 12px; border: 2px solid #667eea;">
                        <p style="color: #667eea; font-weight: 600; margin-bottom: 1rem;">ğŸ’¡ è¨ºæ–­çµæœãŒä¿å­˜ã•ã‚Œã¾ã™</p>
                        
                        <div style="text-align: left; margin: 2rem 0; padding: 1.5rem; background: white; border-radius: 8px; border-left: 4px solid #667eea;">
                            <p style="color: #333; margin-bottom: 1rem;">ä»Šå›ã®è¨ºæ–­çµæœã¯ã€è²´ç¤¾ãŒæŒã¤å¯èƒ½æ€§ã®ã»ã‚“ã®ä¸€éƒ¨ã§ã™ã€‚</p>
                            <p style="color: #333; margin-bottom: 1rem;">åŠ©æˆé‡‘ã¯ã€ç”³è«‹ã®æ¡ä»¶ï¼ˆåŠ ç®—è¦ä»¶ï¼‰ã‚’çš„ç¢ºã«æº€ãŸã™ã“ã¨ã§ã€å—çµ¦é¡ã‚’ã•ã‚‰ã«å¢—ã‚„ã›ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šæ•°ã‚ã‚Šã¾ã™ã€‚å®Ÿéš›ã«ã€å¼Šç¤¾ã®ã‚µãƒãƒ¼ãƒˆã‚’é€šã˜ã¦10å¹´é–“ã§1å„„å††ä»¥ä¸Šã‚’å—çµ¦ã•ã‚ŒãŸä¼æ¥­æ§˜ã‚‚ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã€‚</p>
                            <p style="color: #333; margin-bottom: 1rem;">åŠ©æˆé‡‘ç”³è«‹ã®ã‚µã‚¤ã‚¯ãƒ«ã‚’ä¸€åº¦ç¢ºç«‹ã™ã‚Œã°ã€ãã‚Œã¯è²´ç¤¾ã«ã¨ã£ã¦å®‰å®šã—ãŸçµŒå–¶è³‡æºã¨ãªã‚Šã¾ã™ã€‚ã“ã®ãƒãƒ£ãƒ³ã‚¹ã‚’æœ€å¤§é™ã«æ´»ã‹ã™ãŸã‚ã€ä¸€æ—¥ã‚‚æ—©ãæº–å‚™ã‚’å§‹ã‚ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚</p>
                            <p style="color: #333; margin-bottom: 1rem;">è¨ºæ–­ã¯ã‚´ãƒ¼ãƒ«ã§ã¯ãªãã€ã‚¹ã‚¿ãƒ¼ãƒˆã§ã™ã€‚</p>
                            <p style="color: #333; margin-bottom: 1rem;">ã€ŒåŠ©æˆé‡‘ãƒ¬ã‚¹ã‚­ãƒ¥ãƒ¼ã€ãŒã€è¤‡é›‘ãªç”³è«‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’æœ€çŸ­ã§å®Œäº†ã¾ã§å¾¹åº•ã‚µãƒãƒ¼ãƒˆã„ãŸã—ã¾ã™ã€‚</p>
                            <p style="color: #333; margin-bottom: 0;">ã¾ãšã¯ç„¡æ–™ä¼šå“¡ç™»éŒ²ã‹ã‚‰ã€å°‚é–€å®¶ã¨ä¸€ç·’ã«æ¬¡ã®ä¸€æ­©ã‚’è¸ã¿å‡ºã—ã¾ã—ã‚‡ã†ã€‚</p>
                        </div>
                        
                        <p style="color: #667eea; font-weight: 600; margin-bottom: 1rem;">ç”³è«‹ã®æº–å‚™ã«é€²ã‚€ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™</p>
                        <p style="color: #667eea; font-weight: 600; margin-bottom: 1rem;">AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå®Œå…¨ã‚µãƒãƒ¼ãƒˆ</p>
                        
                        <h3 style="color: #333; margin: 1.5rem 0;">ç„¡æ–™ã§ä¼šå“¡ç™»éŒ²</h3>
                        <p style="text-align: center; color: #666; margin-bottom: 2rem;">è¨ºæ–­çµæœã‚’ä¿å­˜ã—ã¦5å›ç„¡æ–™ã§å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä½¿ãˆã¾ã™</p>
                        
                        <!-- ä¼šå“¡ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆç›´æ¥è¡¨ç¤ºï¼‰ -->
                        <div id="registrationWrapper" style="display: block;">
                        <form id="diagnosisRegistrationForm" style="max-width: 400px; margin: 0 auto;">
                            <div style="margin-bottom: 1rem;">
                                <input type="email" id="regEmail" required placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" 
                                       style="width: 100%; padding: 0.8rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                            </div>
                            <div style="margin-bottom: 1rem;">
                                <input type="password" id="regPassword" required placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ6æ–‡å­—ä»¥ä¸Šï¼‰" 
                                       style="width: 100%; padding: 0.8rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                            </div>
                            <div style="margin-bottom: 1.5rem;">
                                <input type="password" id="regPasswordConfirm" required placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆç¢ºèªï¼‰" 
                                       style="width: 100%; padding: 0.8rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                            </div>
                            
                            <button type="submit" style="width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1rem; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; font-size: 1.1rem; margin-bottom: 1rem;">
                                âœ¨ ç™»éŒ²ã—ã¦å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½¿ã†
                            </button>
                            
                            <p style="text-align: center; font-size: 0.8rem; color: #666;">
                                ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®å ´åˆã¯<br>
                                <a href="#" onclick="event.preventDefault(); document.getElementById('registrationWrapper').style.display='none'; document.getElementById('loginForm').style.display='block'; return false;" style="color: #667eea; text-decoration: underline;">ã“ã¡ã‚‰ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³</a>
                            </p>
                        </form>
                        </div>
                        
                        <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆåˆ‡ã‚Šæ›¿ãˆç”¨ï¼‰ -->
                        <div id="loginForm" style="display: none;">
                            <h3 style="color: #333; text-align: center; margin-bottom: 1.5rem;">ğŸ” ãƒ­ã‚°ã‚¤ãƒ³</h3>
                            
                            <form id="diagnosisLoginForm" style="max-width: 400px; margin: 0 auto;">
                                <div style="margin-bottom: 1rem;">
                                    <input type="email" id="loginEmail" required placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" 
                                           style="width: 100%; padding: 0.8rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                                </div>
                                <div style="margin-bottom: 1.5rem;">
                                    <input type="password" id="loginPassword" required placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" 
                                           style="width: 100%; padding: 0.8rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                                </div>
                                
                                <button type="submit" style="width: 100%; background: linear-gradient(135deg, #ffc107 0%, #ff8500 100%); color: white; padding: 1rem; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; font-size: 1.1rem;">
                                    ğŸšª ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸
                                </button>
                            </form>
                            
                            <p style="text-align: center; margin-top: 1rem; font-size: 0.9rem; color: #666;">
                                ã¾ã ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„å ´åˆã¯<br>
                                <a href="#" onclick="event.preventDefault(); document.getElementById('loginForm').style.display='none'; document.getElementById('registrationWrapper').style.display='block'; return false;" style="color: #667eea; text-decoration: underline;">ã“ã¡ã‚‰ã‹ã‚‰æ–°è¦ä¼šå“¡ç™»éŒ²</a>
                            </p>
                        </div>
                    </div>
                    <div style="text-align: center; margin: 2rem 0; padding: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; color: white;">
                        <h3 style="color: white; margin-bottom: 1rem; font-size: 1.3rem;">ğŸš€ åŠ©æˆé‡‘ãƒ¬ã‚¹ã‚­ãƒ¥ãƒ¼ã§ç”³è«‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼</h3>
                        <p style="color: rgba(255,255,255,0.9); font-size: 1.1rem; margin-bottom: 0;">å„å°‚é–€åŠ©æˆé‡‘ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ç”³è«‹ã§ãã¾ã™</p>
                    </div>
                    
                    <!-- ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— -->
                    <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif; background-color: #f4f7f9; padding: 1.5em; border-radius: 12px; margin: 1.5rem 0;">

                      <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
                      <div style="text-align: center; margin-bottom: 2.5em;">
                        <h2 style="font-size: 1.8em; color: #2c3e50; margin: 0 0 0.5em 0; font-weight: 600;">åŠ©æˆé‡‘ç²å¾—ã¾ã§ã®æœ€çŸ­ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h2>
                        <p style="font-size: 1em; color: #555; margin: 0;">AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨äºŒäººä¸‰è„šã§ã€è¨ˆç”»ã‹ã‚‰å—çµ¦ã¾ã§ã‚’è³¢ãé€²ã‚ã¾ã—ã‚‡ã†ã€‚</p>
                      </div>

                      <!-- ã‚¹ãƒ†ãƒƒãƒ— -->
                      <div style="display: flex; flex-direction: column; gap: 1.5em; max-width: 600px; margin: 0 auto;">

                        <!-- ã‚¹ãƒ†ãƒƒãƒ—1 -->
                        <div style="background: #fff; padding: 1.5em; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.07); border-left: 4px solid #3498db;">
                          <div style="font-size: 1.2em; font-weight: bold; color: #3498db; margin-bottom: 0.5em;">STEP 1</div>
                          <h3 style="margin: 0 0 0.8em 0; font-size: 1.2em; color: #333;">ç™ºè¦‹ & ç„¡æ–™ç›¸è«‡</h3>
                          <p style="font-size: 0.9em; color: #666; line-height: 1.6; margin-bottom: 1em;">ã¾ãšã¯ç„¡æ–™è¨ºæ–­ã‹ã‚‰ã€‚ä¼šå“¡ç™»éŒ²ã§å°‚é–€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¸ã®ç›¸è«‡ãŒ<strong style="color: #e74c3c;">5å›ç„¡æ–™</strong>ã«ãªã‚Šã¾ã™ã€‚</p>
                          <span style="display: inline-block; background-color: #eaf5fc; color: #3498db; padding: 0.3em 0.8em; border-radius: 15px; font-size: 0.9em; font-weight: bold;">è²»ç”¨ï¼šç„¡æ–™</span>
                        </div>
                        
                        <!-- ã‚¹ãƒ†ãƒƒãƒ—2 -->
                        <div style="background: #fff; padding: 1.5em; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.07); border-left: 4px solid #f39c12;">
                          <div style="font-size: 1.2em; font-weight: bold; color: #f39c12; margin-bottom: 0.5em;">STEP 2</div>
                          <h3 style="margin: 0 0 0.8em 0; font-size: 1.2em; color: #333;">è¨ˆç”» & ç”³è«‹ã‚µãƒãƒ¼ãƒˆ</h3>
                          <p style="font-size: 0.9em; color: #666; line-height: 1.6; margin-bottom: 1em;">ã‚µãƒ–ã‚¹ã‚¯ç™»éŒ²å¾Œã¯ã€<strong style="color: #e74c3c;">æœˆ20å›</strong>ã¾ã§ç›¸è«‡å¯èƒ½ã€‚AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒç–‘å•ã«å…¨ã¦ç­”ãˆã¾ã™ã€‚ç›¸è«‡å›æ•°ãŒè¶³ã‚Šãªã„æœˆã¯<strong style="color: #e74c3c;">è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸</strong>ã®ã”è³¼å…¥ã‚‚å¯èƒ½ã€‚ã¾ãŸã€è¤‡æ•°ç”³è«‹å‘ã‘ã«<strong style="color: #e74c3c;">æœˆ50å›/90å›ã®ä¸Šä½ãƒ—ãƒ©ãƒ³</strong>ã‚‚ã”ç”¨æ„ã—ã¦ã„ã¾ã™ã€‚</p>
                          <span style="display: inline-block; background-color: #fef5e7; color: #f39c12; padding: 0.3em 0.8em; border-radius: 15px; font-size: 0.9em; font-weight: bold;">è²»ç”¨ï¼šæœˆé¡1,480å††ã€œ</span>
                        </div>

                        <!-- ã‚¹ãƒ†ãƒƒãƒ—3 -->
                        <div style="background: #fff; padding: 1.5em; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.07); border-left: 4px solid #2ecc71;">
                          <div style="font-size: 1.2em; font-weight: bold; color: #2ecc71; margin-bottom: 0.5em;">STEP 3</div>
                          <h3 style="margin: 0 0 0.8em 0; font-size: 1.2em; color: #333;">å—çµ¦é–‹å§‹</h3>
                          <p style="font-size: 0.9em; color: #666; line-height: 1.6; margin-bottom: 1em;"><strong style="color:#333; display: inline-block; white-space: nowrap;">ã€ä¾‹ï¼šã‚­ãƒ£ãƒªã‚¢ã‚¢ãƒƒãƒ—åŠ©æˆé‡‘ã®å ´åˆã€‘</strong><br>æº–å‚™ã‹ã‚‰ç´„8ãƒ¶æœˆã§1æœŸç›®(40ä¸‡å††)ã€ãã®6ãƒ¶æœˆå¾Œã«2æœŸç›®(40ä¸‡å††)ã‚’å—çµ¦ï¼</p>
                          <span style="display: inline-block; background-color: #eafaf1; color: #2ecc71; padding: 0.3em 0.8em; border-radius: 15px; font-size: 0.9em; font-weight: bold;">åˆè¨ˆ80ä¸‡å††ã®ä¾‹ã‚‚ï¼</span>
                        </div>
                      </div>

                      <!-- ã¾ã¨ã‚ãƒ»æŠ•è³‡å¯¾åŠ¹æœ -->
                      <div style="background: #fff; margin-top: 2.5em; padding: 2em; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.07); text-align: center;">
                        <h3 style="margin: 0 0 1em 0; font-size: 1.4em; color: #2c3e50;">ã€æŠ•è³‡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‘<br>14ãƒ¶æœˆé–“ã®åˆ©ç”¨ã§ã“ã‚Œã ã‘ãŠå¾—ã«ï¼</h3>
                        <div style="display: flex; justify-content: center; align-items: center; gap: 1.5em; flex-wrap: wrap;">
                          <div>
                            <div style="font-size: 1em; color: #7f8c8d;">ç·å—çµ¦é¡ (ä¾‹)</div>
                            <div style="font-size: 2.2em; font-weight: bold; color: #2ecc71;">800,000<span style="font-size:0.7em;">å††</span></div>
                          </div>
                          <div style="font-size: 1.5em; color: #7f8c8d;">-</div>
                          <div>
                            <div style="font-size: 1em; color: #7f8c8d;">ã‚µãƒ¼ãƒ“ã‚¹è²»ç”¨ (14ãƒ¶æœˆ)</div>
                            <div style="font-size: 2.2em; font-weight: bold; color: #e74c3c;">20,720<span style="font-size:0.7em;">å††</span></div>
                          </div>
                          <div style="font-size: 1.5em; color: #7f8c8d;">=</div>
                          <div>
                            <div style="font-size: 1em; color: #7f8c8d;">ã‚ãªãŸã®ç´”åˆ©ç›Š</div>
                            <div style="font-size: 2.8em; font-weight: bold; color: #2980b9; background: #ecf5ff; padding: 0.1em 0.4em; border-radius: 8px;">+779,280<span style="font-size:0.6em;">å††</span></div>
                          </div>
                        </div>
                      </div>
                      
                      <!-- é«˜é¡åŠ©æˆé‡‘ã®å ´åˆã®æ¯”è¼ƒãƒ–ãƒ­ãƒƒã‚¯ -->
                      <div style="background: #eafaf1; border-left: 5px solid #2ecc71; margin-top: 2.5em; padding: 2em; border-radius: 10px; text-align: center;">
                        <h3 style="margin: 0 0 1em 0; font-size: 1.4em; color: #2c3e50;">
                          <span style="display: block; font-size: 0.8em; color: #16a085;">ï¼¼ã‚‚ã—å—çµ¦é¡ãŒ600ä¸‡å††ãªã‚‰â€¦ ãã®å·®ã¯æ­´ç„¶ã§ã™ï¼ï¼</span>
                        </h3>
                        <div style="display: flex; justify-content: center; align-items: stretch; gap: 1.5em; flex-wrap: wrap;">
                          <!-- ä¸€èˆ¬çš„ãªç¤¾åŠ´å£«å ±é…¬ -->
                          <div style="flex: 1; min-width: 220px; background: #fff; padding: 1.5em 1em; border-radius: 8px; border: 1px solid #ddd;">
                            <div style="font-size: 1.1em; color: #7f8c8d;">ä¸€èˆ¬çš„ãªæˆåŠŸå ±é…¬ (25%)</div>
                            <div style="font-size: 2.5em; font-weight: bold; color: #e74c3c; margin-top: 0.2em;">1,500,000<span style="font-size:0.6em;">å††</span></div>
                          </div>
                          <!-- å½“ç¤¾ã‚µãƒ¼ãƒ“ã‚¹è²»ç”¨ -->
                          <div style="flex: 1; min-width: 220px; background: #fff; padding: 1.5em 1em; border-radius: 8px; border: 1px solid #ddd;">
                            <div style="font-size: 1.1em; color: #7f8c8d;">å½“ã‚µãƒãƒ¼ãƒˆè²»ç”¨ (14ãƒ¶æœˆä¾‹)</div>
                            <div style="font-size: 2.5em; font-weight: bold; color: #2980b9; margin-top: 0.2em;">20,720<span style="font-size:0.6em;">å††</span></div>
                          </div>
                        </div>
                        <p style="margin-top: 1.5em; margin-bottom: 0; color: #333; font-size: 1.1em; font-weight: 600;">åœ§å€’çš„ãªã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã§ã€ã‚ãªãŸã®æŒ‘æˆ¦ã‚’å…¨åŠ›ã§å¿œæ´ã—ã¾ã™ã€‚</p>
                      </div>
                      
                      <!-- ã€NEWã€‘å°‚é–€å®¶ç›¸è«‡ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
                      <div style="background: #fff; border: 2px dashed #3498db; margin-top: 2.5em; padding: 2em; border-radius: 10px; text-align: center;">
                        <h3 style="margin: 0 0 1em 0; font-size: 1.4em; color: #2c3e50;">
                          <span style="display: block; font-size: 0.8em; color: #2980b9;">ï¼¼ã‚‚ã—ã‚‚ã®æ™‚ã‚‚ä¸‡å…¨ã®ã‚µãƒãƒ¼ãƒˆä½“åˆ¶ï¼</span>
                          å°‚é–€å®¶ã¸ã®ç›´æ¥ç›¸è«‡ã‚ªãƒ—ã‚·ãƒ§ãƒ³
                        </h3>
                        <p style="margin: 0 auto 1.5em auto; max-width: 600px; color: #333; line-height: 1.7;">
                          è¤‡é›‘ãªã‚±ãƒ¼ã‚¹ã‚„ãƒˆãƒ©ãƒ–ãƒ«ã§ãŠå›°ã‚Šã®éš›ã¯ã€åŠ©æˆé‡‘ã«ç‰¹åŒ–ã—ãŸç¤¾ä¼šä¿é™ºåŠ´å‹™å£«ã¸ç›´æ¥ã”ç›¸è«‡ã„ãŸã ã‘ã¾ã™ï¼ˆäºˆç´„åˆ¶ï¼‰ã€‚å°‚é–€å®¶ã«ã‚ˆã‚‹çš„ç¢ºãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã¨ãã®å¾Œã®<strong style="color: #2980b9;">è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ</strong>ã¯ã€ã‚ãªãŸã®äº‹æ¥­ã®å¤§ããªåŠ©ã‘ã«ãªã‚Šã¾ã™ã€‚
                        </p>
                        <div style="display: inline-block; background: #ecf5ff; padding: 0.8em 1.5em; border-radius: 8px; margin-bottom: 1em;">
                          <div style="font-size: 1em; color: #34495e;">ç›¸è«‡æ–™</div>
                          <div style="font-size: 2em; font-weight: bold; color: #2c3e50;">13,000<span style="font-size:0.6em;">å††</span><span style="font-size:0.8em; font-weight:normal;"> / 30åˆ†</span></div>
                        </div>
                        <p style="margin-top: 1.5em; margin-bottom: 0; color: #333; font-size: 1.1em; font-weight: 600;">ã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã‚‚ã€ã”è‡ªèº«ã§é€²ã‚ã¦ã‚‚ã€å¤§å¤‰ãŠå¾—ã§ã™ã€‚</p>
                      </div>

                      <!-- æ³¨é‡ˆ -->
                      <div style="text-align: right; margin-top: 1.5em; font-size: 0.9em; color: #777;">
                        â€»å—çµ¦é¡ã‚„æœŸé–“ã¯åŠ©æˆé‡‘ã®ç¨®é¡ã‚„ç”³è«‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ã‚ˆã£ã¦å¤‰å‹•ã—ã¾ã™ã€‚
                      </div>

                    </div>
                `;
            }
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
            
            // è¨ºæ–­çµæœã‚’localStorageã«ç¢ºå®Ÿã«ä¿å­˜
            const aiResultData = {
                type: 'diagnosis',
                timestamp: new Date().toISOString(),
                content: results,
                summary: 'è¨ºæ–­çµæœ'
            };
            
            let aiResults = JSON.parse(localStorage.getItem('aiDiagnosisResults') || '[]');
            aiResults.unshift(aiResultData);
            localStorage.setItem('aiDiagnosisResults', JSON.stringify(aiResults));
            console.log('è¨ºæ–­çµæœã‚’localStorageã«ä¿å­˜ã—ã¾ã—ãŸ:', aiResultData);
            
            // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡å‡¦ç†ã‚’è¿½åŠ 
            setupFormHandlers();
        }
        
        function setupFormHandlers() {
            // ä¼šå“¡ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã®å‡¦ç†
            const regForm = document.getElementById('diagnosisRegistrationForm');
            if (regForm && !regForm.dataset.handlerAdded) {
                regForm.dataset.handlerAdded = 'true';
                regForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const email = document.getElementById('regEmail').value;
                    const password = document.getElementById('regPassword').value;
                    const passwordConfirm = document.getElementById('regPasswordConfirm').value;
                    
                    if (password !== passwordConfirm) {
                        alert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚');
                        return;
                    }
                    
                    if (password.length < 6) {
                        alert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯6æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                        return;
                    }
                    
                    try {
                        // Firebase Authentication ã§ä¼šå“¡ç™»éŒ²
                        const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                        
                        // ã‚µãƒ¼ãƒãƒ¼å´ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¨ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
                        const token = await userCredential.user.getIdToken();
                        const registerResponse = await fetch('/api/auth/register', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${token}`
                            },
                            body: JSON.stringify({
                                uid: userCredential.user.uid,
                                email: userCredential.user.email,
                                display_name: userCredential.user.displayName || ''
                            })
                        });
                        
                        if (!registerResponse.ok) {
                            console.error('Server registration failed:', await registerResponse.text());
                        }
                        
                        // è¨ºæ–­çµæœã‚’ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ç´ä»˜ã‘ã¦ä¿å­˜
                        await saveDiagnosisResultsForUser(userCredential.user.uid);
                        
                        window.location.href = '/dashboard';
                        
                    } catch (error) {
                        console.error('Registration error:', error);
                        alert('ä¼šå“¡ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
                    }
                });
            }
            
            // ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã®å‡¦ç†
            const loginForm = document.getElementById('diagnosisLoginForm');
            if (loginForm && !loginForm.dataset.handlerAdded) {
                loginForm.dataset.handlerAdded = 'true';
                loginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const email = document.getElementById('loginEmail').value;
                    const password = document.getElementById('loginPassword').value;
                    
                    try {
                        // Firebase Authentication ã§ãƒ­ã‚°ã‚¤ãƒ³
                        const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
                        
                        // è¨ºæ–­çµæœã‚’ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ç´ä»˜ã‘ã¦ä¿å­˜
                        await saveDiagnosisResultsForUser(userCredential.user.uid);
                        
                        window.location.href = '/dashboard';
                        
                    } catch (error) {
                        console.error('Login error:', error);
                        alert('ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message);
                    }
                });
            }
        }
        
        // è¨ºæ–­çµæœã‚’ãƒ­ã‚°ã‚¤ãƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ä¿å­˜
        async function saveDiagnosisResultsForUser(userId) {
            const sessionData = sessionStorage.getItem('pendingDiagnosisResults');
            if (!sessionData) return;
            
            try {
                const diagnosisData = JSON.parse(sessionData);
                
                // è¨ºæ–­çµæœã‚’ã‚µãƒ¼ãƒãƒ¼ã«ä¿å­˜
                const token = await firebase.auth().currentUser.getIdToken();
                const response = await fetch('/api/diagnosis/save-temp', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        results: diagnosisData.results,
                        companyInfo: diagnosisData.companyInfo
                    })
                });
                
                if (response.ok) {
                    // ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¯ãƒªã‚¢
                    sessionStorage.removeItem('pendingDiagnosisResults');
                    console.log('è¨ºæ–­çµæœã‚’ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ä¿å­˜ã—ã¾ã—ãŸ');
                } else {
                    console.error('è¨ºæ–­çµæœã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            } catch (error) {
                console.error('è¨ºæ–­çµæœä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
            }
        }

        async function goToAIConsultation() {
            // è¨ºæ–­çµæœãŒå­˜åœ¨ã™ã‚‹å ´åˆã¯ä¿å­˜
            if (currentDiagnosisResults) {
                await saveDiagnosisResults(currentDiagnosisResults);
            }
            
            // èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
            try {
                const response = await fetch('/api/auth/user');
                if (response.ok) {
                    // èªè¨¼æ¸ˆã¿ã®å ´åˆã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«
                    window.location.href = '/dashboard';
                } else {
                    // æœªèªè¨¼ã®å ´åˆã¯ä¼šå“¡ç™»éŒ²ãƒšãƒ¼ã‚¸ã¸
                    window.location.href = '/auth';
                }
            } catch (error) {
                // ã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯ä¼šå“¡ç™»éŒ²ãƒšãƒ¼ã‚¸ã¸
                window.location.href = '/auth';
            }
        }
        
        function goToExpertConsultation() {
            // å°‚é–€å®¶ç›¸è«‡ã®å ´åˆï¼ˆãƒ¡ãƒ¼ãƒ«ã§ãŠå•ã„åˆã‚ã›ï¼‰
            let subject = "åŠ©æˆé‡‘å°‚é–€å®¶ç›¸è«‡ã®ãŠå•ã„åˆã‚ã›";
            let body = "åŠ©æˆé‡‘å°‚é–€å®¶ç›¸è«‡ã‚’ã”å¸Œæœ›ã§ã™ã€‚\n\n";
            
            // è¨ºæ–­çµæœãŒã‚ã‚‹å ´åˆã¯å«ã‚ã‚‹
            if (currentDiagnosisResults && currentDiagnosisResults.length > 0) {
                body += "ã€è¨ºæ–­çµæœã€‘\n";
                currentDiagnosisResults.forEach((result, index) => {
                    body += `${index + 1}. ${result.name}\n`;
                    body += `   æ”¯çµ¦é¡: ${result.amount}\n`;
                    body += `   é©ç”¨å¯èƒ½æ€§: ${result.applicability}\n\n`;
                });
                body += "\n";
            }
            
            // ä¼šç¤¾æƒ…å ±ãŒã‚ã‚‹å ´åˆã¯å«ã‚ã‚‹
            if (savedCompanyInfo) {
                body += "ã€ä¼šç¤¾æƒ…å ±ã€‘\n";
                if (savedCompanyInfo.industry) body += `æ¥­ç¨®: ${savedCompanyInfo.industry}\n`;
                if (savedCompanyInfo.totalEmployees) body += `å¾“æ¥­å“¡æ•°: ${savedCompanyInfo.totalEmployees}å\n`;
                if (savedCompanyInfo.minWage) body += `äº‹æ¥­å ´å†…æœ€ä½è³ƒé‡‘: ${savedCompanyInfo.minWage}å††\n`;
                body += "\n";
            }
            
            body += "ã€ç›¸è«‡å†…å®¹ã€‘\n";
            body += "ã“ã¡ã‚‰ã«å…·ä½“çš„ãªç›¸è«‡å†…å®¹ã‚’ã”è¨˜å…¥ãã ã•ã„ã€‚\n\n";
            body += "ã€é€£çµ¡å…ˆã€‘\n";
            body += "ãŠåå‰: \n";
            body += "é›»è©±ç•ªå·: \n";
            body += "å¸Œæœ›é€£çµ¡æ™‚é–“: \n";
            
            // mailtoãƒªãƒ³ã‚¯ã‚’é–‹ã
            const mailtoLink = `mailto:info@jyoseikin.jp?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoLink;
        }
        
        function goToConsultation() {
            // å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚æ®‹ã™
            goToAIConsultation();
        }
        
        let currentDiagnosisResults = null;
        let isUserLoggedIn = false;
        let savedCompanyInfo = null; // è¨ºæ–­å®Ÿè¡Œæ™‚ã®ä¼šç¤¾æƒ…å ±ã‚’ä¿å­˜
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿å®Œäº†æ™‚ã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³
        window.addEventListener('load', function() {
            document.body.style.opacity = '1';
        });
        
        // èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯ï¼ˆFirebaseè¨­å®šï¼‰
        const firebaseConfig = {
            apiKey: "AIzaSyDzRzS-C104mWNloO94GNH7Jv93F5gWVto",
            authDomain: "jyoseikinrescue.firebaseapp.com",
            projectId: "jyoseikinrescue",
            storageBucket: "jyoseikinrescue.firebasestorage.app",
            messagingSenderId: "453016168690",
            appId: "1:453016168690:web:6658e01bdd588ea63f886b",
            measurementId: "G-V8WP53NEH4"
        };
        
        // FirebaseåˆæœŸåŒ–ï¼ˆè¨ºæ–­ãƒšãƒ¼ã‚¸ã§ã‚‚èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯ï¼‰
        if (typeof firebase !== 'undefined') {
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            const auth = firebase.auth();
            
            auth.onAuthStateChanged(function(user) {
                isUserLoggedIn = !!user;
                updateButtonDisplay();
            });
        }
        
        // è¨ºæ–­çµæœãƒšãƒ¼ã‚¸å†…ã®ä¼šå“¡ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º
        function showRegistrationForm() {
            console.log('showRegistrationForm called'); // ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ­ã‚°
            
            // è¨ºæ–­çµæœã‚’sessionStorageã«ä¿å­˜
            saveDiagnosisToSession();
            
            // ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã‚’å–å¾—
            const regForm = document.getElementById('registrationForm');
            const loginForm = document.getElementById('loginForm');
            
            console.log('Registration form element:', regForm); // ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ­ã‚°
            console.log('Login form element:', loginForm); // ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ­ã‚°
            
            if (regForm) {
                // ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
                regForm.style.display = 'block';
                console.log('Registration form displayed'); // ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ­ã‚°
                
                // ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚’éè¡¨ç¤º
                if (loginForm) {
                    loginForm.style.display = 'none';
                }
                
                // ãƒ•ã‚©ãƒ¼ãƒ ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                regForm.scrollIntoView({ behavior: 'smooth' });
                console.log('Scrolled to registration form'); // ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ­ã‚°
            } else {
                console.error('Registration form not found!'); // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
            }
        }
        
        function showLoginForm() {
            // è¨ºæ–­çµæœã‚’sessionStorageã«ä¿å­˜
            saveDiagnosisToSession();
            
            // ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¡¨ç¤º
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('registrationForm').style.display = 'none';
            
            // ãƒ•ã‚©ãƒ¼ãƒ ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            document.getElementById('loginForm').scrollIntoView({ behavior: 'smooth' });
        }
        
        function saveDiagnosisToSession() {
            if (currentDiagnosisResults) {
                const diagnosisData = {
                    results: currentDiagnosisResults,
                    companyInfo: getCurrentCompanyInfo(),
                    timestamp: new Date().toISOString()
                };
                sessionStorage.setItem('pendingDiagnosisResults', JSON.stringify(diagnosisData));
                console.log('è¨ºæ–­çµæœã‚’sessionStorageã«ä¿å­˜ã—ã¾ã—ãŸ');
            }
        }

        async function saveDiagnosisAndRegister() {
            // è¨ºæ–­çµæœã‚’è‡ªå‹•ä¿å­˜ï¼ˆlocalStorageã«ä¿å­˜ï¼‰
            if (currentDiagnosisResults) {
                const aiResultData = {
                    type: 'diagnosis',
                    timestamp: new Date().toISOString(),
                    content: currentDiagnosisResults,
                    summary: 'è¨ºæ–­çµæœ'
                };
                
                let aiResults = JSON.parse(localStorage.getItem('aiDiagnosisResults') || '[]');
                aiResults.unshift(aiResultData);
                localStorage.setItem('aiDiagnosisResults', JSON.stringify(aiResults));
                console.log('è¨ºæ–­çµæœã‚’è‡ªå‹•ä¿å­˜ã—ã¾ã—ãŸ');
            }
            
            // èªè¨¼çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
            if (isUserLoggedIn) {
                // ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã¯ç›´æ¥ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸
                window.location.href = '/dashboard';
            } else {
                // æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆã¯é¸æŠç”»é¢ã‚’è¡¨ç¤º
                const choice = confirm('è¨ºæ–­çµæœã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚\n\nã€ŒOKã€â†’ ä¼šå“¡ç™»éŒ²ï¼ˆç„¡æ–™ï¼‰\nã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€â†’ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸');
                if (choice) {
                    // ä¼šå“¡ç™»éŒ²ã¸
                    window.location.href = '/?register=true';
                } else {
                    // ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸
                    window.location.href = '/';
                }
            }
        }
        
        async function saveDiagnosisResults(results) {
            try {
                const companyInfo = getCurrentCompanyInfo();
                const diagnosisData = {
                    subsidies: results.map(result => ({
                        subsidy_name: result.name,
                        target: result.eligibility,
                        amount: result.amount,
                        description: result.description,
                        plan_required: result.plan_required || false,
                        plan_deadline: result.plan_deadline || null,
                        plan_documents: result.plan_documents || [],
                        payment_deadline: result.payment_deadline || null,
                        payment_documents: result.payment_documents || ['å®Ÿç¸¾å ±å‘Šæ›¸', 'é ˜åæ›¸'],
                        diagnosis_summary: `${result.name}ãŒé©ç”¨å¯èƒ½ã§ã™ã€‚æ”¯çµ¦é¡: ${result.amount}`,
                        // è¨ºæ–­æ™‚ã®ä¼æ¥­æƒ…å ±ã¨çµæœã‚’ãƒ¡ãƒ¢ã¨ã—ã¦ä¿å­˜
                        initial_memo: `ã€åŠ©æˆé‡‘è¨ºæ–­çµæœã€‘
æ¥­ç¨®: ${companyInfo.industry || 'æœªè¨­å®š'}
å¾“æ¥­å“¡æ•°: ${companyInfo.employees || 'æœªè¨­å®š'}
ç¾åœ¨ã®çŠ¶æ³: ${companyInfo.situation || 'æœªè¨­å®š'}
ç›®æ¨™: ${companyInfo.goals ? companyInfo.goals.join(', ') : 'æœªè¨­å®š'}

ã€è¨ºæ–­çµæœã€‘
${result.name}ãŒé©ç”¨å¯èƒ½
æ”¯çµ¦é¡: ${result.amount}
å¯¾è±¡è¦ä»¶: ${result.eligibility}

ã€è©³ç´°èª¬æ˜ã€‘
${result.description}`
                    })),
                    timestamp: new Date().toISOString(),
                    company_info: companyInfo
                };
                
                const response = await fetch('/api/diagnosis/save-temp', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(diagnosisData)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    // ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
                    localStorage.setItem('pendingDiagnosisSession', result.session_id);
                    console.log('è¨ºæ–­çµæœã‚’ä¿å­˜ã—ã¾ã—ãŸ:', result.session_id);
                } else {
                    console.error('è¨ºæ–­çµæœã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
                }
            } catch (error) {
                console.error('è¨ºæ–­çµæœä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
        
        function getCurrentCompanyInfo() {
            // ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ç¾åœ¨ã®ä¼æ¥­æƒ…å ±ã‚’å–å¾—
            return {
                industry: document.getElementById('industry')?.value || '',
                employees: document.getElementById('employees')?.value || '',
                situation: document.getElementById('situation')?.value || '',
                goals: Array.from(document.querySelectorAll('input[name="goals"]:checked')).map(cb => cb.value)
            };
        }
        
        // ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºã‚’æ›´æ–°
        function updateButtonDisplay() {
            const saveToMemoSection = document.getElementById('saveToMemoSection');
            if (saveToMemoSection && isUserLoggedIn) {
                saveToMemoSection.style.display = 'block';
            }
        }
        
        // ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ã®ç›´æ¥ä¿å­˜æ©Ÿèƒ½
        async function saveToMemoDirectly() {
            if (!currentDiagnosisResults || !isUserLoggedIn) {
                alert('è¨ºæ–­çµæœãŒãªã„ã‹ã€ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ã€‚');
                return;
            }
            
            // è¨ºæ–­çµæœã‚’è‡ªå‹•ä¿å­˜ï¼ˆlocalStorageã«ä¿å­˜ï¼‰
            const aiResultData = {
                type: 'diagnosis',
                timestamp: new Date().toISOString(),
                content: currentDiagnosisResults,
                summary: 'è¨ºæ–­çµæœ'
            };
            
            let aiResults = JSON.parse(localStorage.getItem('aiDiagnosisResults') || '[]');
            aiResults.unshift(aiResultData);
            localStorage.setItem('aiDiagnosisResults', JSON.stringify(aiResults));
            
            console.log('è¨ºæ–­çµæœã‚’ä¿å­˜ã—ã¾ã—ãŸ:', aiResultData);
            
            // ç›´æ¥ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«é·ç§»ï¼ˆãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãªã—ï¼‰
            window.location.href = '/dashboard';
        }
    </script>
</body>
</html>